#! /bin/bash

hg clone https://vim.googlecode.com/hg/ vim
cd vim
hg pull
hg update default

cd src
LDFLAGS="-arch x86_64" ./configure \
    --with-features=huge \
    --enable-cscope \
    --enable-perlinterp \
    --enable-pythoninterp  \
    --with-python-config-dir=/usr/local/Cellar/python/2.7.2/lib/python2.7/config \
    --enable-rubyinterp \
    --with-mac-arch=intel
make

make test

cd ../

mv runtime vim73

mv src/vim vim73/

sudo mv vim73 /usr/local/share/

sudo mv /usr/bin/vim /usr/local/share/vim72

cd /usr/bin

sudo ln -s /usr/local/share/vim73/vim


